/**
 * Layout Styles
 * Main card, wrapper, and view system
 */

/* === Main Card === */
.main-card {
    opacity: 0;
    max-width: 1320px;
    width: 100%;
    height: var(--main-card-height);
    margin: calc((100vh - var(--main-card-height) - var(--page-pad) * 2) * 0.25) auto 0;
    min-height: auto;
    padding-bottom: clamp(30px, 4vw, 30px);
    border-radius: 6px;
    border: 2px solid var(--plate-border);
    box-shadow:
        0 30px 80px rgba(0, 0, 0, .4),
        0 10px 25px rgba(0, 0, 0, .3),
        inset 0 0 100px rgba(0, 0, 0, .1),
        inset 0 1px 0 rgba(255, 255, 255, .03);
    position: relative;
    overflow: hidden;
    background:
        radial-gradient(1200px 800px at 18% 10%, rgba(255, 255, 255, .04), transparent 58%),
        radial-gradient(900px 650px at 82% 15%, rgba(255, 255, 255, .03), transparent 60%),
        radial-gradient(ellipse 1400px 1000px at 50% 50%, transparent 50%, rgba(0, 0, 0, .35) 80%, rgba(0, 0, 0, .6) 100%),
        linear-gradient(180deg, #0a0e12 0%, #08090c 50%, #0a0a0f 100%);
}

.main-card.fade-in {
    animation: fadeInMain 0.18s ease-out forwards;
    animation-delay: 0.03s;
}

/* Noise overlay */
.main-card::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: .18;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.6'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
    filter: contrast(1.05);
    z-index: 0;
}

.main-card::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: .08;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='320'%3E%3Cfilter id='d'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.35' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23d)' opacity='.9'/%3E%3C/svg%3E");
    mix-blend-mode: screen;
    filter: contrast(1.2) brightness(.98);
    z-index: 0;
}

/* === Wrapper === */
.wrap {
    max-width: 1100px;
    margin: 0 auto;
    padding: clamp(20px, 3vw, 20px);
    padding-top: clamp(24px, 3.5vw, 45px);
    position: relative;
    z-index: 1;
    height: 100%;
    display: flex;
    flex-direction: column;
}

/* Corner decorations */
.wrap::before {
    content: "";
    position: absolute;
    inset: 12px;
    pointer-events: none;
    opacity: .22;
    background:
        linear-gradient(var(--plate-border), var(--plate-border)) left top / 18px 1px no-repeat,
        linear-gradient(var(--plate-border), var(--plate-border)) left top / 1px 18px no-repeat,
        linear-gradient(var(--plate-border), var(--plate-border)) right top / 18px 1px no-repeat,
        linear-gradient(var(--plate-border), var(--plate-border)) right top / 1px 18px no-repeat,
        linear-gradient(var(--plate-border), var(--plate-border)) left bottom / 18px 1px no-repeat,
        linear-gradient(var(--plate-border), var(--plate-border)) left bottom / 1px 18px no-repeat,
        linear-gradient(var(--plate-border), var(--plate-border)) right bottom / 18px 1px no-repeat,
        linear-gradient(var(--plate-border), var(--plate-border)) right bottom / 1px 18px no-repeat;
    mix-blend-mode: soft-light;
}

/* === View System === */
.view {
    display: none;
    opacity: 0;
    transition: opacity 0.6s ease;
    flex: 1;
    overflow-y: auto;
}

.view--home {
    overflow: visible;
    flex: 0 0 auto;
}

.view--profile,
.view--experience,
.view--projects {
    overflow: hidden;
}

/* Active views */
body[data-view="home"] .view--home,
body[data-view="profile"] .view--profile,
body[data-view="experience"] .view--experience,
body[data-view="projects"] .view--projects {
    display: block;
    animation: fadeInView 0.6s ease forwards;
}

/* === View-specific layout === */
body[data-view="profile"] .header,
body[data-view="profile"] .stack-section,
body[data-view="profile"] .section-cards,
body[data-view="profile"] .footer-hint,
body[data-view="experience"] .header,
body[data-view="experience"] .stack-section,
body[data-view="experience"] .section-cards,
body[data-view="experience"] .footer-hint,
body[data-view="projects"] .header,
body[data-view="projects"] .stack-section,
body[data-view="projects"] .section-cards,
body[data-view="projects"] .footer-hint {
    display: none !important;
}

body[data-view="profile"] .avatar,
body[data-view="experience"] .avatar,
body[data-view="projects"] .avatar {
    display: none !important;
}

body[data-view="profile"] .plate,
body[data-view="experience"] .plate,
body[data-view="projects"] .plate {
    padding: 18px 22px 18px 22px;
    min-height: auto;
}

body[data-view="profile"] .plateInner,
body[data-view="experience"] .plateInner,
body[data-view="projects"] .plateInner {
    padding: 4px 0 0 0;
}

/* === Top Bar === */
.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    margin-bottom: clamp(24px, 4vw, 36px);
    flex-wrap: wrap;
}

/* === Mobile Layout === */
@media (max-width: 680px) {
    .main-card {
        min-height: auto;
        height: auto;
        overflow: visible;
        border-radius: 8px;
        margin-top: 0.2vh;
    }

    body[data-view="home"] .main-card {
        padding-bottom: 8px;
    }

    .wrap {
        padding: 16px;
        height: auto;
    }

    .top-bar {
        justify-content: space-between;
        margin-bottom: 20px;
        flex-wrap: nowrap;
    }

    body[data-view="profile"] .top-bar {
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 15px;
    }

    body[data-view="profile"] .main-card,
    body[data-view="experience"] .main-card,
    body[data-view="projects"] .main-card {
        height: var(--main-card-height);
        overflow: hidden;
    }

    body[data-view="profile"] .wrap,
    body[data-view="experience"] .wrap,
    body[data-view="projects"] .wrap {
        height: 104%;
    }
}
